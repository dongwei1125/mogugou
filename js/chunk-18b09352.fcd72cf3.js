(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18b09352"],{"0d19":function(t,e,n){"use strict";n("455b")},"2e6c":function(t,e,n){"use strict";n("a245")},4038:function(t,e,n){},4359:function(t,e,n){},"455b":function(t,e,n){},"69b3":function(t,e,n){"use strict";n("6c27")},"6c27":function(t,e,n){},"7abe":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-home"},[n("navbar",{attrs:{"background-color":"#ff8198"}},[t._v("购物街")]),n("index-bar",{directives:[{name:"show",rawName:"v-show",value:t.showSticky,expression:"showSticky"}],staticClass:"index-bar-cp",attrs:{data:t.indexBars},on:{change:t.onChange},model:{value:t.currentBar,callback:function(e){t.currentBar=e},expression:"currentBar"}}),n("better-scroll",{ref:"scroll",staticClass:"scroll",attrs:{scroll:!0,"pull-down":!0,"pull-up":!0,"probe-type":3},on:{pullingDown:t.pullingDown,pullingUp:t.pullingUp,onScroll:t.scroll,onLoad:t.onLoad}},[n("swiper",{attrs:{options:t.swiperOptions}},t._l(t.banners,(function(t){return n("swiper-slide",{key:t.id},[n("a",{attrs:{href:t.link}},[n("img",{attrs:{src:t.url,alt:""}})])])})),1),n("recommend-view",{attrs:{data:t.recommends}}),n("feature-view",{attrs:{options:t.featureOps}}),n("index-bar",{ref:"indexBar",attrs:{data:t.indexBars},on:{change:t.onChange},model:{value:t.currentBar,callback:function(e){t.currentBar=e},expression:"currentBar"}}),n("card-list",{attrs:{data:t.cardLists},on:{"item-click":t.itemClick}})],1),n("span",{directives:[{name:"show",rawName:"v-show",value:t.showTop,expression:"showTop"}],staticClass:"iconfont icon-top",on:{click:t.scrollToTop}})],1)},i=[],s=(n("99af"),n("5530")),r=n("ceb8"),c=n("d54c"),o=n("902e"),l=n("e175"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-bar"},t._l(t.data,(function(e){return n("div",{key:e[t.props.value],staticClass:"index-bar-item",class:{active:t.value===e[t.props.value]},on:{click:function(n){return t.itemClick(e)}}},[n("span",[t._v(t._s(e[t.props.label]))])])})),0)},f=[],d={name:"IndexBar",model:{value:"value",event:"change"},props:{data:{type:Array,default:function(){return[]}},value:{type:String,default:""},props:{type:Object,default:function(){return{label:"label",value:"value"}}}},methods:{itemClick:function(t){t[this.props.value]!==this.value&&this.$emit("change",t[this.props.value])}}},p=d,h=(n("d0f4"),n("2877")),m=Object(h["a"])(p,u,f,!1,null,"5ca03d6e",null),v=m.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recomend-view"},t._l(t.data,(function(e){return n("a",{key:e.id,staticClass:"recomend-view-item",attrs:{href:e.link}},[n("img",{attrs:{src:e.url,alt:""}}),n("p",[t._v(t._s(e.title))])])})),0)},g=[],w={name:"RecommendView",props:{data:{type:Array,default:function(){return[]}}}},k=w,y=(n("d764"),Object(h["a"])(k,b,g,!1,null,"0c07a1f7",null)),x=y.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feature-view"},[n("a",{attrs:{href:t.options.link}},[n("img",{attrs:{src:t.options.url,alt:""}})])])},$=[],_={name:"FeatureView",props:{options:{type:Object,default:function(){return{}}}}},L=_,O=(n("69b3"),Object(h["a"])(L,C,$,!1,null,"4a955274",null)),B=O.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-list"},t._l(t.data,(function(e){return n("card-list-item",{key:e.id,attrs:{data:e},nativeOn:{click:function(n){return t.$emit("item-click",e.id)}}})})),1)},T=[],S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-list-item"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.data.image,expression:"data.image"}],on:{load:t.onLoad}}),n("div",[n("p",{staticClass:"title"},[t._v(t._s(t.data.title))]),n("p",{staticClass:"info"},[n("span",{staticClass:"price"},[t._v(t._s(t.data.price))]),n("span",{staticClass:"iconfont icon-cfav"}),n("span",{staticClass:"cfav"},[t._v(t._s(t.data.cfav))])])])])},N=[],E={name:"CardListItem",props:{data:{type:Object,default:function(){return{}}}},methods:{onLoad:function(){this.$bus.$emit("imageLoad")}}},D=E,I=(n("0d19"),Object(h["a"])(D,S,N,!1,null,"433da547",null)),F=I.exports,R={name:"CardList",components:{CardListItem:F},props:{data:{type:Array,default:function(){return[]}}}},U=R,V=(n("2e6c"),Object(h["a"])(U,j,T,!1,null,"34b06d26",null)),z=V.exports,A=n("3191"),H=n("ed08"),J={name:"Home",components:{Navbar:r["a"],BetterScroll:c["a"],Swiper:o["a"],SwiperSlide:l["a"],RecommendView:x,FeatureView:B,IndexBar:v,CardList:z},data:function(){return{banners:[],recommends:[],featureOps:{},indexBars:[{label:"流行",value:"0"},{label:"新款",value:"1"},{label:"精选",value:"2"}],currentBar:"0",pagination:{pageNum:1,pageSize:4},cardLists:[],fresh:null,showSticky:!1,showTop:!1,swiperOptions:{loop:!0,autoplay:{disableOnInteraction:!1,delay:4e3}}}},created:function(){this.getBann(),this.getRecom(),this.getFeat(),this.getList()},mounted:function(){var t=this;this.$bus.$on("imageLoad",(function(){t.refresh&&t.refresh()}))},beforeDestroy:function(){this.$bus.$off("imageLoad")},methods:{getBann:function(){var t=this;Object(A["a"])().then((function(e){t.banners=e.content})).catch((function(t){console.log(t)}))},getRecom:function(){var t=this;Object(A["e"])().then((function(e){t.recommends=e.content})).catch((function(t){console.log(t)}))},getFeat:function(){var t=this;Object(A["c"])().then((function(e){t.featureOps=e.content})).catch((function(t){console.log(t)}))},getList:function(){var t=this;Object(A["d"])(Object(s["a"])({type:this.currentBar},this.pagination)).then((function(e){t.cardLists=t.cardLists.concat(e.content),t.$refs.scroll.finishPullUp(),t.$refs.scroll.finishPullDown()})).catch((function(t){console.log(t)}))},onChange:function(){var t=this;this.pagination.pageNum=1,this.cardLists=[],this.getList(),this.$nextTick((function(){t.showSticky&&t.$refs.scroll.scrollTo(0,-t.$refs.indexBar.$el.offsetTop,0)}))},scrollToTop:function(){this.$refs.scroll.scrollTo(0,0)},onLoad:function(){this.refresh=Object(H["a"])(this.$refs.scroll.refresh,20)},pullingDown:function(){this.pagination.pageNum=1,this.cardLists=[],this.getList()},pullingUp:function(){this.pagination.pageNum++,this.getList()},scroll:function(t){var e=this,n=t.y;this.$nextTick((function(){e.showSticky=e.$refs.indexBar&&-n>e.$refs.indexBar.$el.offsetTop})),this.showTop=-n>document.body.clientHeight},itemClick:function(t){this.$router.push({path:"/detail/".concat(t)})}}},P=J,q=(n("f955"),Object(h["a"])(P,a,i,!1,null,"6f365f6a",null));e["default"]=q.exports},"8eb9":function(t,e,n){},a245:function(t,e,n){},d0f4:function(t,e,n){"use strict";n("8eb9")},d764:function(t,e,n){"use strict";n("4038")},f955:function(t,e,n){"use strict";n("4359")}}]);